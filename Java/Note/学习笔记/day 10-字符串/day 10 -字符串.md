## 1 API

### 1.1 API概述

- 什么是API

  ​	API (Application Programming Interface) ：应用程序编程接口

  ​	（API就是别人写好的东西，我们不需要自己编写，直接使用即可）

- java中的API

  ​	指的就是 JDK 中提供的各种功能的 Java类，这些类将底层的实现封装了起来，我们不需要关心这些类是如何实现的，只需要学习这些类如何使用即可，我们可以通过帮助文档来学习这些API如何使用。
  
- API帮助文档

  ​	帮助开发人员更好的使用API和查询API的一个工具

### 1.2 如何使用API帮助文档

- 打开帮助文档

![01](..\img\day 10\01.png)

- 找到索引选项卡中的输入框

![02](..\img\day 10\02.png)

- 在输入框中输入Random

![03](..\img\day 10\03.png)

- 看类在哪个包下

![04](..\img\day 10\04.png)

- 看类的描述

![05](..\img\day 10\05.png)

- 看构造方法

![06](..\img\day 10\06.png)

- 看成员方法

![07](..\img\day 10\07.png)

## 2 String类

### 2.1 String类概述

​	java.lang.String 类代表字符串，Java 程序中的所有字符串文字（例如“abc”）都被实现为此类的实例。也就是说，Java 程序中所有的双引号字符串，都是 String 类的对象。String 类在 java.lang 包下，所以使用的时候不需要导包！

### 2.2 String类的特点

- 字符串不可变，它们的值在创建后不能被更改（字符串的内容是不会发生改变的，它的对象在创建后不能被更改）
- 虽然 String 的值是不可变的，但是它们可以被共享
- 字符串效果上相当于字符数组( char[] )，但是底层原理是字节数组( byte[] )

### 2.3 String类的构造方法

- 常用的构造方法

  | 方法名                      | 说明                                      |
  | --------------------------- | ----------------------------------------- |
  | public   String()           | 创建一个空白字符串对象，不含有任何内容    |
  | public   String(char[] chs) | 根据字符数组的内容，来创建字符串对象      |
  | public   String(byte[] bys) | 根据字节数组的内容，来创建字符串对象      |
  | String s =   “abc”;         | 直接赋值的方式创建字符串对象，内容就是abc |

### 2.4 创建字符串对象两种方式的区别

- 通过构造方法创建

  ​	通过 new 创建的字符串对象，每一次 new 都会申请一个内存空间，虽然内容相同，但是地址值不同

- 直接赋值方式创建

  ​	以“”方式给出的字符串，只要字符序列相同(顺序和大小写)，无论在程序代码中出现几次，JVM 都只会建立一个 String 对象，并在字符串池中维护
  
  ​	当使用双引号直接赋值时，系统会检查该字符串在串池中是否存在
  
  不存在：创建新的；存在：复用

### 2.5 字符串的比较

#### 2.5.1 ==号的作用

- 比较基本数据类型：比较的是具体的==数据值==
- 比较引用数据类型：比较的是对象==地址值==

#### 2.5.2 两种字符串比较方法

- boolean equals(要比较的字符串)

  完全一样结果才是true，否则为false

- boolean equalsIgnoreCase(要比较的字符串)

  忽略大小写的比较

#### 2.5.3 equals方法的作用

- 方法介绍

  ```java
  public boolean equals(String s)     比较两个字符串内容是否相同、区分大小写
  boolean result1 = s1.equals(s2)		使用过程
  boolean result2 = s1.equalsIgnoreCase(s2)
  ```


#### 2.5.4 结论

​	以后只要想比较字符串的内容，就必须要用String里面的方法

### 2.6 字符串方法

方法：

|                                               |                        |
| :-------------------------------------------- | :--------------------- |
| public char charAt(int index)                 | 根据索引获取对应的字符 |
| public int length()                           | 返回字符串的长度       |
| String substring(int beginIndex,int endIndex) | 截取部分字符串         |
| String substring(int beginIndex)              | 截取到末尾             |

***注***：

数组的长度：数组名.length

字符串的长度：字符串对象.length()

String substring(int beginIndex,int endIndex)：

​	包头不包尾，包左不包右

​	只有返回值才是截取的小串

## 3. StringBuilder P10-StringBuilder的基本操作

StringBuilder 可以看成是一个容器，创建之后里面的内容是**可变**的。

当我们在拼接字符串和反转字符串的时候会使用到

作用：提高字符串的操作效率

### 3.1 StringBuilder 构造方法

| 方法名                           | 说明                                       |
| :------------------------------- | :----------------------------------------- |
| public StringBuilder()           | 创建一个空间可变字符串对象，不含有任何内容 |
| public StringBuilder(String str) | 根据字符串的内容，来创建可变字符串对象     |

### 3.2 成员（常用）方法

| 方法名                                | 说明                                                |
| ------------------------------------- | --------------------------------------------------- |
| public StringBuilder append(任意类型) | 添加数据，并返回对象本身                            |
| public StringBuilder reverse()        | 反转容器中的内容                                    |
| public int length()                   | 返回长度（字符出现的个数）                          |
| public String toString()              | 通过toString()就可以实现把StringBuilder转换为String |

**注**：

 	打印StringBuilder打印的是属性值而不是地址值

​	使用StringBuilder的场景

​		字符串的拼接、反转

### 3.2 链式编程

​	当我们在调用一个方法的时候，不需要用变量接收他的结果，可以继续调用其他方法

**`方法().方法().方法()....`**

## 4. StringJoiner P11-StringJoiner

* StringJoiner跟StringBuilder一样，也可以看成是一个容器，创建之后里面的内容是可变的。
* 作用：提高字符串的操作效率，而且代码编写特别简洁，但是目前市场上很少有人用。 
* JDK8出现的

### 4.1 StringJoiner的构造方法

| 方法名                                            | 说明                                                         |
| ------------------------------------------------- | ------------------------------------------------------------ |
| public StringJoiner(间隔符号)                     | 创建一个StringJoiner对象，指定拼接时的间隔符号               |
| public StringJoiner(间隔符号，开始符号，结束符号) | 创建一个StringJoiner对象，指定拼接时的间隔符号、开始符号、结束符号 |

### 4.2 StringJoiner的成员方法

| 方法名                              | 说明                                         |
| ----------------------------------- | -------------------------------------------- |
| public StringJoiner add(添加的内容) | 添加数据，并返回对象本身                     |
| public int length()                 | 返回长度（字符出现的个数）                   |
| public String toString()            | 返回一个字符串（该字符串就是拼接之后的结果） |

## 5. 关于字符串的小扩展：P12-字符串相关类的底层原理

### 扩张底层原理1：字符串存储的内存原理

- 直接赋值会复用字符串常量池中
- new出来不会复用，而是开辟一个新的空间

### 扩展底层原理2：==号比较的到底是什么？

- 基本数据类型比较的是数据值
- 引用数据类型比较的是地址值

### 扩展底层原理3：字符串拼接的底层原理

*拼接的时候没有变量*

​	都是字符串，触发字符串的优化机制，在编译的时候就已经是最终的结果了

*拼接的时候有变量*

​	JDK8以前底层会使用StringBuilder；

​	在内存中创建很多对象，浪费空间，时间也非常慢

结论：

​	如果很多字符串变量拼接，不要直接+。在底层会创建多个对象，浪费时间，浪费性能

​	如果没有变量参与，都是字符串直接相加，编译之后就是拼接之后的结果，会复用串池中的字符串

​	如果有变量参与，每一行拼接的代码，都会在内存中创建新的字符串，浪费内存

### 扩展底层原理4：StringBuilder提高效率原理图

> StringBuilder是一个内容可变的容器

字符串拼接的时候，如果有变量：

- JDK8以前：

  系统底层会自动创建一个StringBuilder对象，然后再调用其append方法完成拼接；拼接后，再调用其toString方法转换为Sting类型，而toString方法的底层原理是直接new了一个字符串对象。

- JDK8版本：

  系统会预估要字符串拼接之后的总大小，把要拼接的内容都放在数组中，此时也是产生一个新的字符串

结论：

​	所有要拼接的内容都会往StringBuilder中放，不会创建很多无用的空间，节约内存

### 扩展底层原理5：StringBuilder源码分析

- 默认创建一个长度为16的字节数组
- 添加的内容长度小于16，直接存
- 添加的内容大于16会扩容（原来的容量*2+2）
- 如果扩容之后还不够，以实际长度为准